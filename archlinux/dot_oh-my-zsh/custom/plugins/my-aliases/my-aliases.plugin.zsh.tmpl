#!/usr/bin/zsh

{{ template "init.sh" }}

if [[ ${TERM} == "xterm-kitty" ]]; then
  alias ssh="kitty +kitten ssh"
  if has magick; then
    alias icat="kitten icat --engine magick"
  else
    alias icat="kitten icat"
  fi
fi

if has bw && has tld; then
  alias tld='tld --password "$(bw get password id.tsinghua.edu.cn)"'
fi

if has code && has zoxide; then
  function ci() {
    local filepath="$(zoxide query --interactive "${@}")"
    if [[ -e ${filepath} ]]; then
      code "${filepath}"
    fi
  }
fi

if has lf; then
  LFCD="/etc/profile.d/lfcd.sh"
  if [[ -f ${LFCD} ]]; then
    source "${LFCD}"
  fi
fi

if has lsd; then
  alias ls="lsd"
  alias tree="lsd --tree"
fi

if has moar; then
  alias L="| moar"
  export PAGER="moar"
  export BAT_PAGER="moar --no-linenumbers"
fi

if has nvim; then
  export EDITOR="nvim"
fi

if has tmux; then
  executables=(
    blender
    cfw
    microsoft-edge-stable
    typora
  )
  for exe in "${executables[@]}"; do
    if has "${exe}"; then
      alias "${exe}"="tmux new-session -d ${exe}"
    fi
  done
fi

if has yay; then
  function y() {
    run yay --devel --nouseask --sync --sysupgrade --refresh --noconfirm "${@}"
  }
fi
