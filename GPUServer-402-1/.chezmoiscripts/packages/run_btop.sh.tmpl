#!/bin/bash
# set -o errexit
set -o nounset
set -o pipefail

{{ template "init.sh" }}

{{ template "load-local-bin.sh" }}

tmp_dir="$(mktemp --directory)"

cd "${tmp_dir}"
install_tarball="${tmp_dir}/btop.tbz"
wget --output-document "${install_tarball}" https://github.com/aristocratos/btop/releases/latest/download/btop-x86_64-linux-musl.tbz
tar xvjf "${install_tarball}"

cd "${tmp_dir}/btop"
make install PREFIX="{{ .chezmoi.homeDir }}/.local"

rm --force --recursive --verbose "${tmp_dir}"
