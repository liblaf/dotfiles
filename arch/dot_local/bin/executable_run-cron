#!/bin/bash
set -o errexit
set -o nounset
set -o pipefail

prefix="/run/user/$(id --user)/cron"
mkdir --parents --verbose $prefix

timeout --verbose $1 \
  flock --exclusive --nonblock --verbose "$prefix/$2.lock" \
  "${@:2}"
