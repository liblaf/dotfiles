#!/bin/bash
set -o nounset
set -o pipefail

{{ include "other/scripts/init.sh" }}
{{ include "other/scripts/load-pnpm.sh" }}

pkg_list=(
  speedscope
)
pkg_list=("${pkg_list[@]/%/"@latest"}")

pnpm env use --global lts
pnpm add --global ${pkg_list[@]}

mkdir --parents --verbose "$HOME/.config/fish/completions"
wget --output-document="-" https://github.com/pnpm/tabtab/raw/main/lib/scripts/fish.sh |
  sed --expression="s/{pkgname}/pnpm/g" --expression="s/{completer}/pnpm/g" > "$HOME/.config/fish/completions/pnpm.fish"
