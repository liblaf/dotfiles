function layout_conda() {
  if [[ -f "$HOME/.local/opt/conda/bin/activate" ]]; then
    local activate="$HOME/.local/opt/conda/bin/activate"
  elif [[ -f /opt/miniconda3/bin/activate ]]; then
    local activate=/opt/miniconda3/bin/activate
  fi
  if [[ -n $1 ]]; then
    local env_name=$1
  else
    local env_name=$(basename $PWD)
  fi
  if ! conda env list | grep $env_name &> /dev/null; then
    run conda create --name=$env_name --yes "python${PYTHON_VERSION:+"=$PYTHON_VERSION"}"
  fi
  source $activate $env_name
}
